{"version":3,"sources":["app.js"],"names":["window","addEventListener","bound","document","querySelector","countClearAnim","container","back_mountain","front_mountain","back_trees","e","clearTimeout","xNew","screenX","xOld","style","left","front_trees","animateRight","obj","scene","rotation","y","renderer","render","camera","screenY","yOld","bottom","setTimeout","cloud","removeAttribute","person1","portal","portal_right","clearTagStyle","forEach","person2","wrap_portal1","getBoundingClientRect","Math","top","portal1","wrap_portal","portal_right1","requestAnimationFrame","locatePerson","xxx","a","b","animation","add","classList","remove","Scene","THREE","position","z","WebGLRenderer","alpha","antialias","setClearColor","setSize","domElement","PerspectiveCamera","aLight","pLight","PointLight","webgl","getElementById","appendChild","gltf","loader","load","set","animate"],"mappings":"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","file":"app.min.js","sourcesContent":["window.addEventListener('load', () => {\r\n    let bound = 0;\r\n    let countClearAnim = 0;\r\n    const container = document.querySelector('.container');\r\n    const back_mountain = document.querySelector('.back_mountain');\r\n    const front_mountain = document.querySelector('.front_mountain');\r\n    const back_trees = document.querySelector('.back_trees');\r\n    const front_trees = document.querySelector('.front_trees');\r\n    const cloud = document.querySelector('.cloud');\r\n\r\n    container.addEventListener('mousemove', moveBackground);\r\n    let xOld = 0;\r\n    let yOld = 0;\r\n\r\n    function moveBackground(e) {\r\n        clearTimeout(bound);\r\n        let xNew = e.screenX;\r\n        setTimeout(() => {\r\n            if (xNew > xOld) { // вправо\r\n                back_mountain.style.left = `-110px`;\r\n                front_mountain.style.left = `-95px`;\r\n                back_trees.style.left = `-70px`;\r\n                front_trees.style.left = `-60px`;\r\n                cloud.style.left = `-100px`;\r\n                animateRight();\r\n            } else { // влево\r\n                back_mountain.style.left = `-90px`;\r\n                front_mountain.style.left = `-60px`;\r\n                back_trees.style.left = `-25px`;\r\n                front_trees.style.left = `0`;\r\n                cloud.style.left = `0`;\r\n                animateLeft();\r\n            }\r\n\r\n            let yNew = e.screenY;\r\n            if (yNew > yOld) { // вниз\r\n                back_mountain.style.bottom = `-145px`;\r\n                front_mountain.style.bottom = `-155px`;\r\n                back_trees.style.bottom = `-5px`;\r\n                front_trees.style.bottom = `60px`;\r\n            } else { // вверх\r\n                back_mountain.style.bottom = `-165px`;\r\n                front_mountain.style.bottom = `-180px`;\r\n                back_trees.style.bottom = `-70px`;\r\n                front_trees.style.bottom = `0`;\r\n            }\r\n            xOld = e.screenX;\r\n            yOld = e.screenY;\r\n        }, 10)\r\n        clearTimeout(countClearAnim);\r\n        countClearAnim = setTimeout(() => {\r\n            clearTagStyle([back_mountain, front_mountain, back_trees, front_trees, cloud]);\r\n        }, 2000)\r\n    }\r\n\r\n    function clearTagStyle(el) {\r\n        el.forEach(item => item.removeAttribute('style'));\r\n    }\r\n\r\n    /* Портал в конце пути, персоны */\r\n    let person1 = document.querySelector('.person1');\r\n    let portal = document.querySelector('.portal');\r\n    let portal_right = document.querySelector('.portal_right');\r\n    let wrap_portal = document.querySelector('.wrap_portal');\r\n\r\n    let person2 = document.querySelector('.person2');\r\n    let portal1 = document.querySelector('.portal1');\r\n    let portal_right1 = document.querySelector('.portal_right1');\r\n    let wrap_portal1 = document.querySelector('.wrap_portal1');\r\n\r\n    // Двигаем портал на уровень персоны\r\n    let xxx1 = person2.getBoundingClientRect()\r\n    wrap_portal1.style.top = Math.floor(xxx1.top) + 'px';\r\n\r\n    // Двигаем портал на уровень персоны\r\n    let xxx = person1.getBoundingClientRect()\r\n    wrap_portal.style.top = Math.floor(xxx.top) + 'px';\r\n\r\n    locatePerson();\r\n\r\n    function locatePerson() {\r\n        requestAnimationFrame(locatePerson);\r\n        let a = person1.getBoundingClientRect()\r\n        let b = wrap_portal.getBoundingClientRect()\r\n        // Hidden portal & person1\r\n        if (a.left >= b.left) {\r\n            person1.style.left = '';\r\n            person1.style.animation = 'none';\r\n            portal_right.classList.remove('opacity07');\r\n            portal.classList.remove('opacity03');\r\n        }\r\n        // Show portal\r\n        if (a.left >= (b.left - 300) && a.left < b.left) {\r\n            portal_right.classList.add('opacity07');\r\n            portal.classList.add('opacity03');\r\n            setTimeout(() => {\r\n                person1.style.left = '';\r\n                person1.style.animation = '';\r\n            },2000)\r\n        }\r\n    }\r\n\r\n    /** 3D Object **/\r\n    let scene = new THREE.Scene();\r\n    let camera = new THREE.PerspectiveCamera(45, 600 / 600, 0.1, 5000)\r\n    camera.position.z = 10; // отдалим камеру по оси Z\r\n\r\n    let renderer = new THREE.WebGLRenderer({alpha: true, antialias: true});\r\n    renderer.setClearColor(0x000000, 0); // Прозрачность фона\r\n    renderer.setSize(200, 200); // Размер канваса\r\n\r\n    renderer.domElement.setAttribute('id', 'webgl3D'); // Добавляем на страницу\r\n    let webgl = document.getElementById('webgl');\r\n    webgl.appendChild(renderer.domElement);\r\n\r\n    const aLight = new THREE.AmbientLight(0xb16d08, 2); // Добавляем свет в сцену\r\n    scene.add(aLight);\r\n\r\n    const pLight = new THREE.PointLight(0xffffff, 1.3);  // Позиция света\r\n    pLight.position.set(1, 1, 1);\r\n    scene.add(pLight);\r\n\r\n    /*const helper = new THREE.PointLightHelper(pLight);\r\n    scene.add(helper);*/\r\n\r\n    let loader = new THREE.GLTFLoader();\r\n    let obj = null;\r\n\r\n    loader.load('../webgl/halloween_pumpkin/scene.gltf', function (gltf) {\r\n        //loader.load('https://googleman.ru/hw/webgl/halloween_pumpkin/scene.gltf', function (gltf) {\r\n        //loader.load('../webgl/stilized_building/scene.gltf', function (gltf) {\r\n        obj = gltf;\r\n        obj.scene.scale.set(0.03, 0.03, 0.03);\r\n\r\n        scene.add(obj.scene)\r\n    });\r\n    animateRight();\r\n\r\n    function animateRight() {\r\n        //requestAnimationFrame(animateRight);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y += 0.012; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n    function animateLeft() {\r\n        //requestAnimationFrame(animateLeft);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y -= 0.009; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n    animate();\r\n\r\n    function animate() {\r\n        requestAnimationFrame(animate);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y -= 0.001; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n});"]}