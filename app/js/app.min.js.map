{"version":3,"sources":["app.js"],"names":["window","addEventListener","bound","document","querySelector","countClearAnim","container","back_mountain","front_mountain","back_trees","e","clearTimeout","xNew","screenX","xOld","style","left","front_trees","animateRight","loader","scene","add","obj","y","render","camera","screenY","yOld","bottom","setTimeout","item","removeAttribute","rotation","person1","portal","portal_right","clearTagStyle","setInterval","Math","floor","getComputedStyle","replace","screen","width","left_person","classList","remove","debounce","THREE","Scene","PerspectiveCamera","open_portal","WebGLRenderer","alpha","antialias","renderer","setSize","animate","domElement","setAttribute","aLight","AmbientLight","PointLight","pLight","position","set","setClearColor","GLTFLoader","load","gltf","scale","appendChild"],"mappings":"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","file":"app.min.js","sourcesContent":["window.addEventListener('load', () => {\r\n    let bound = 0;\r\n    let countClearAnim = 0;\r\n    const container = document.querySelector('.container');\r\n    const back_mountain = document.querySelector('.back_mountain');\r\n    const front_mountain = document.querySelector('.front_mountain');\r\n    const back_trees = document.querySelector('.back_trees');\r\n    const front_trees = document.querySelector('.front_trees');\r\n    const cloud = document.querySelector('.cloud');\r\n\r\n    container.addEventListener('mousemove', moveBackground);\r\n    let xOld = 0;\r\n    let yOld = 0;\r\n\r\n    function moveBackground(e) {\r\n        clearTimeout(bound);\r\n        let xNew = e.screenX;\r\n        setTimeout(() => {\r\n            if (xNew > xOld) { // вправо\r\n                back_mountain.style.left = `-110px`;\r\n                front_mountain.style.left = `-95px`;\r\n                back_trees.style.left = `-70px`;\r\n                front_trees.style.left = `-60px`;\r\n                cloud.style.left = `-100px`;\r\n                animateRight();\r\n            } else { // влево\r\n                back_mountain.style.left = `-90px`;\r\n                front_mountain.style.left = `-60px`;\r\n                back_trees.style.left = `-25px`;\r\n                front_trees.style.left = `0`;\r\n                cloud.style.left = `0`;\r\n                animateLeft();\r\n            }\r\n\r\n            let yNew = e.screenY;\r\n            if (yNew > yOld) { // вниз\r\n                back_mountain.style.bottom = `-145px`;\r\n                front_mountain.style.bottom = `-155px`;\r\n                back_trees.style.bottom = `-5px`;\r\n                front_trees.style.bottom = `60px`;\r\n            } else { // вверх\r\n                back_mountain.style.bottom = `-165px`;\r\n                front_mountain.style.bottom = `-180px`;\r\n                back_trees.style.bottom = `-70px`;\r\n                front_trees.style.bottom = `0`;\r\n            }\r\n            xOld = e.screenX;\r\n            yOld = e.screenY;\r\n        }, 10)\r\n        clearTimeout(countClearAnim);\r\n        countClearAnim = setTimeout(() => {\r\n            clearTagStyle([back_mountain, front_mountain, back_trees, front_trees]);\r\n            obj.scene.rotation.y = 0\r\n        }, 2000)\r\n    }\r\n\r\n    function clearTagStyle(el) {\r\n        el.forEach(item => item.removeAttribute('style'));\r\n    }\r\n\r\n    /* Портал в конце пути, персоны */\r\n    let person1 = document.querySelector('.person1');\r\n    let portal = document.querySelector('.portal');\r\n    let portal_right = document.querySelector('.portal_right');\r\n    let debounce = 0;\r\n\r\n    setInterval(() => {\r\n        clearTimeout(debounce);\r\n        let left_person = Math.floor(window.getComputedStyle(person1).left.replace('px', ''));\r\n        if (left_person >= window.screen.width - 350) {\r\n            setTimeout(() => {\r\n                open_portal()\r\n            }, 600)\r\n        }\r\n    }, 600);\r\n\r\n    function open_portal() {\r\n        portal_right.classList.add('opacity1');\r\n        setTimeout(() => portal_right.classList.remove('opacity1'), 600);\r\n        portal.classList.add('opacity045');\r\n        setTimeout(() => portal.classList.remove('opacity045'), 600);\r\n    }\r\n\r\n    /** 3D Object **/\r\n    let scene = new THREE.Scene();\r\n    let camera = new THREE.PerspectiveCamera(45, 600 / 600, 0.1, 1000)\r\n    camera.position.z = 10; // отдалим камеру по оси Z\r\n\r\n    let renderer = new THREE.WebGLRenderer({alpha: true, antialias: true});\r\n    renderer.setClearColor(0x000000, 0); // Прозрачность фона\r\n\r\n    if (window.innerWidth < 700) {\r\n        renderer.setSize(200, 200); // Размер канваса\r\n        animate();\r\n    } else {\r\n        renderer.setSize(400, 400); // Размер канваса\r\n    }\r\n\r\n    renderer.domElement.setAttribute('id', 'webgl3D'); // Добавляем на страницу\r\n    let webgl = document.getElementById('webgl');\r\n    webgl.appendChild(renderer.domElement);\r\n\r\n    const aLight = new THREE.AmbientLight(0xb16d08, 2); // Добавляем свет в сцену\r\n    scene.add(aLight);\r\n\r\n    const pLight = new THREE.PointLight(0xffffff, 1.3);  // Позиция света\r\n    pLight.position.set(1, 1, 1);\r\n    scene.add(pLight);\r\n\r\n    /*const helper = new THREE.PointLightHelper(pLight);\r\n    scene.add(helper);*/\r\n\r\n    let loader = new THREE.GLTFLoader();\r\n    let obj = null;\r\n\r\n    loader.load('../webgl/halloween_pumpkin/scene.gltf', function (gltf) {\r\n        //loader.load('../webgl/stilized_building/scene.gltf', function (gltf) {\r\n        obj = gltf;\r\n        obj.scene.scale.set(0.03, 0.03, 0.03)\r\n\r\n        scene.add(obj.scene)\r\n    });\r\n    animateRight();\r\n\r\n    function animateRight() {\r\n        //requestAnimationFrame(animateRight);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y += 0.009; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n    function animateLeft() {\r\n        //requestAnimationFrame(animateLeft);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y -= 0.009; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n\r\n    function animate() {\r\n        //requestAnimationFrame(animateLeft);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y -= 0.009; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n});"]}