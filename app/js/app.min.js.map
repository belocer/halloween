{"version":3,"sources":["Portal.js","app.js"],"names":["Portal","obj","_classCallCheck","this","person","document","querySelector","portal","portal_right","wrap_portal","_this","pers","getBoundingClientRect","style","top","Math","floor","animation","classList","remove","left","add","window","addEventListener","objPortal","setInterval","locatePerson","objPortal1","portal1","objPortal2","portal2","back_mountain","front_mountain","bound","countClearAnim","container","e","xOld","yOld","xNew","screenX","setTimeout","moveBackground","back_trees","front_trees","cloud","animateRight","scene","rotation","y","renderer","render","camera","animateLeft","bottom","clearTimeout","forEach","item","removeAttribute","THREE","Scene","PerspectiveCamera","position","z","WebGLRenderer","alpha","antialias","setClearColor","setSize","domElement","setAttribute","getElementById","AmbientLight","aLight","pLight","PointLight","set","load","webgl","appendChild","gltf","scale","animate"],"mappings":"uZAAMA,kBACF,SAAAA,EAAYC,GAAKC,gBAAAC,KAAAH,GACbG,KAAKC,OAASC,SAASC,cAAcL,EAAIG,QACzCD,KAAKI,OAASF,SAASC,cAAcL,EAAIM,QACzCJ,KAAKK,aAAeH,SAASC,cAAcL,EAAIO,cAC/CL,KAAKM,YAAcJ,SAASC,cAAcL,EAAIQ,8DALhDT,WAQa,IAAAU,EAAAP,KAPEQ,EAAAR,KAAAC,OAAAQ,wBAUbT,KAAKM,YAAYI,MAAMC,IAAMC,KAAKC,MAAML,EAAKG,KAAO,KARpD,IAAKP,EAAiBJ,KAACG,YAAcL,wBAChCO,EAAAA,MAAeH,EAASC,OACxBG,KAAAA,OAAcJ,MAAAA,KAASC,GAC/BH,KAAAC,OAAAS,MAAAI,UAAA,OAWOd,KAAKK,aAAaU,UAAUC,OAAO,aACnChB,KAAKI,OAAOW,UAAUC,OAAO,cAVtBR,EAAAS,MAAAX,EAAAW,KAAA,KAcJT,EAAKS,KAAOX,EAAYW,OAb/BjB,KAAAK,aAAAU,UAAAG,IAAA,aACIV,KAAOJ,OAAKH,UAAOQ,IAAAA,aAClBH,YAAYI,WAeTH,EAAKN,OAAOS,MAAMO,KAAO,GAb7BX,EAAWL,OAAGS,MAAKJ,UAAYG,KAe5B;aC5BfU,OAAOC,iBAAiB,QAAQ,WAC5B,IAIId,EAAa,IAAAT,OAJD,CADbuB,OAAAA,WACCC,OAAS,UACTpB,aADY,gBAEZG,YAFY,iBAAhBkB,aAAA,WAAA,OAAAlB,EAAAmB,iBAAA,GAOAD,IAKIjB,EAAc,IAAAR,OALN,CAAAI,OAAMG,WAAlBA,OAAA,WAEIoB,aAAa,iBACbvB,YAAQ,kBAGRK,aAAW,WAAA,OAAEmB,EAAAF,iBAAA,GAEjB,IAKInB,EAAQ,IAFKP,OAHCA,CAClByB,OAAY,WAAAlB,OAAMqB,WAAlBpB,aAAA,iBAEIqB,YAAa,kBAGbrB,aAAY,WAAA,OAAEsB,EAAAJ,iBAHD,GAAjB,IAMII,EAAc9B,EAClByB,EAAYpB,SAAAC,cAAA,cAAAyB,EAAcL,SAAdpB,cAAA,kBAAZ0B,EAAA3B,SAAAC,cAAA,mBAEI2B,EAAJ5B,SAAAC,cAAA,eACI4B,EAAJ7B,SAAAC,cAAA,gBACM6B,EAAY9B,SAASC,cAAc,UAEzC6B,EAAMH,iBAAyB,aAK/BG,SAAAC,GACIC,aAnBJ,GAoBIC,IAAIC,EAARH,EAAAI,QAKIC,YAAW,WAHNC,EAAAA,GACOX,EAAZlB,MAAAO,KAAY,SACAY,EAAZnB,MAAAO,KAAY,QACDuB,EAAM9B,MAAAO,KAAN,QACCwB,EAAS/B,MAAAO,KAAT,QAAWyB,EAAAhC,MAAAO,KAAA,SACfW,MAEAY,EAAA9B,MAAAO,KAAAuB,QACAC,EAAA/B,MAAAO,KAAAwB,QACM/B,EAANA,MAAAO,KAAMP,QACNiC,EAAYjC,MAAAO,KAAZ0B,IACGD,EAAAhC,MAAAO,KAAA,IA+Ff,WAUS0B,IACL7C,EAAA8C,MAAAC,SAAAC,GAAA,MAcAC,EAASC,OAAOJ,EAAOK,GAxHVC,IAGMxC,EAAMO,QACLP,GACNA,EAANA,MAAAyC,OAAMzC,SACNwC,EAAWxC,MAAAyC,OAAXD,SACHV,EAAA9B,MAAAyC,OAAA,OAOGV,EAAY/B,MAAMyC,OAAlB,SAEAvB,EAAclB,MAAMyC,OAApB,SANItB,EAASnB,MAAAyC,OAAT,SAAWX,EAAA9B,MAAAyC,OAAA,QACfvB,EAAoBuB,MAApBA,OAAAvB,KAEAY,EAAW9B,EAAAA,QACX+B,EAAWR,EAACvB,UAJhB,IAKS0C,aAAArB,GACLH,EAAclB,YAAd,WACeA,CAAAA,EAAfmB,EAAAW,EAAAC,EAAAC,GAIAW,SAAKhB,SAAAA,GAAT,OAAAiB,EAAAC,gBAAA,cAHIf,QArCZ,IAAMA,EAAAA,EACAC,EAAAA,EA4EV,IAAAG,EAAA,IAAAY,MAAAC,MACAR,EAAA,IAAAO,MAAAE,kBAAA,GAAA,EAAA,GAAA,KACAT,EAAAU,SAAAC,EAAA,GAEA,IAAAb,EAAA,IAAAS,MAAAK,cAAA,CAAAC,OAAA,EAAAC,WAAA,IACAhB,EAAAiB,cAAA,EAAA,GAaIjB,EAASkB,QAAQ,IAAK,KAEtBlB,EAASmB,WAAWC,aAAa,KAAM,WAC3BjE,SAASkE,eAAe,SAThCxB,YAAYY,EAAhBU,YAEAjB,IAAOU,EAAP,IAAoBH,MAAIa,aAAA,SAAA,GAWxBzB,EAAM1B,IAAIoD,GAT8BR,IAAKS,EAAN,IAAAf,MAAAgB,WAAA,SAAA,KAAcT,EAAAA,SAAWU,IAAA,EAAA,EAAA,GAAhE7B,EAAA1B,IAAAqD,GAIAxB,IAAAA,EAASmB,IAATV,MAAoBW,WAehBrE,EAAM,KAYV,SAAS6C,IAVF+B,IACH5E,EAAA8C,MAAAC,SAAAC,GAAA,MAEGC,EAAHC,OAAAJ,EAAAK,GAlBJ0B,EAAMC,KAAAA,yCAAN,SAAAC,IAGM3D,EAAIoD,GAEE1B,MAAGkC,MAASL,IAACD,IAAAA,IAAW,KAC9B5B,EAACe,IAASc,EAAI7B,UAGpBD,IA0BI,SAAAoC,IAEIjF,sBACU+C,GAEN/C,IACXA,EAAA8C,MAAAC,SAAAC,GAAA,MAEDiC,EAAO/B,OAAAJ,EAAAK,GAAP8B","file":"app.min.js","sourcesContent":["class Portal {\r\n    constructor(obj) {\r\n        this.person = document.querySelector(obj.person);\r\n        this.portal = document.querySelector(obj.portal);\r\n        this.portal_right = document.querySelector(obj.portal_right);\r\n        this.wrap_portal = document.querySelector(obj.wrap_portal);\r\n    }\r\n\r\n    locatePerson() {\r\n        // Двигаем портал на уровень персоны\r\n        let pers = this.person.getBoundingClientRect()\r\n        this.wrap_portal.style.top = Math.floor(pers.top) + 'px';\r\n        // Hidden portal & person1\r\n        let wrap_portal = this.wrap_portal.getBoundingClientRect();\r\n        if (pers.left >= wrap_portal.left) {\r\n            this.person.style.left = '';\r\n            this.person.style.animation = 'none';\r\n            this.portal_right.classList.remove('opacity07');\r\n            this.portal.classList.remove('opacity03');\r\n        }\r\n        // Show portal\r\n        if (pers.left >= (wrap_portal.left - 300)\r\n            && pers.left < wrap_portal.left) {\r\n            this.portal_right.classList.add('opacity07');\r\n            this.portal.classList.add('opacity03');\r\n            setTimeout(() => {\r\n                this.person.style.left = '';\r\n                this.person.style.animation = '';\r\n            }, 2000)\r\n        }\r\n    }\r\n}","window.addEventListener('load', () => {\r\n    let objPortal = {\r\n        person: '.person1',\r\n        portal: '.portal',\r\n        portal_right: '.portal_right',\r\n        wrap_portal: '.wrap_portal',\r\n    }\r\n    let portal = new Portal(objPortal);\r\n    setInterval(() => portal.locatePerson(), 5)\r\n\r\n    let objPortal1 = {\r\n        person: '.person2',\r\n        portal: '.portal1',\r\n        portal_right: '.portal_right1',\r\n        wrap_portal: '.wrap_portal1',\r\n    }\r\n    let portal1 = new Portal(objPortal1);\r\n    setInterval(() => portal1.locatePerson(), 5)\r\n\r\n    let objPortal2 = {\r\n        person: '.person3',\r\n        portal: '.portal2',\r\n        portal_right: '.portal_right2',\r\n        wrap_portal: '.wrap_portal2',\r\n    }\r\n    let portal2 = new Portal(objPortal2);\r\n    setInterval(() => portal2.locatePerson(), 5)\r\n\r\n    let bound = 0;\r\n    let countClearAnim = 0;\r\n    const container = document.querySelector('.container');\r\n    const back_mountain = document.querySelector('.back_mountain');\r\n    const front_mountain = document.querySelector('.front_mountain');\r\n    const back_trees = document.querySelector('.back_trees');\r\n    const front_trees = document.querySelector('.front_trees');\r\n    const cloud = document.querySelector('.cloud');\r\n\r\n    container.addEventListener('mousemove', moveBackground);\r\n    let xOld = 0;\r\n    let yOld = 0;\r\n\r\n    function moveBackground(e) {\r\n        clearTimeout(bound);\r\n        let xNew = e.screenX;\r\n        setTimeout(() => {\r\n            if (xNew > xOld) { // вправо\r\n                back_mountain.style.left = `-110px`;\r\n                front_mountain.style.left = `-95px`;\r\n                back_trees.style.left = `-70px`;\r\n                front_trees.style.left = `-60px`;\r\n                cloud.style.left = `-100px`;\r\n                animateRight();\r\n            } else { // влево\r\n                back_mountain.style.left = `-90px`;\r\n                front_mountain.style.left = `-60px`;\r\n                back_trees.style.left = `-25px`;\r\n                front_trees.style.left = `0`;\r\n                cloud.style.left = `0`;\r\n                animateLeft();\r\n            }\r\n\r\n            let yNew = e.screenY;\r\n            if (yNew > yOld) { // вниз\r\n                back_mountain.style.bottom = `-145px`;\r\n                front_mountain.style.bottom = `-155px`;\r\n                back_trees.style.bottom = `-5px`;\r\n                front_trees.style.bottom = `60px`;\r\n            } else { // вверх\r\n                back_mountain.style.bottom = `-165px`;\r\n                front_mountain.style.bottom = `-180px`;\r\n                back_trees.style.bottom = `-70px`;\r\n                front_trees.style.bottom = `0`;\r\n            }\r\n            xOld = e.screenX;\r\n            yOld = e.screenY;\r\n        }, 10)\r\n        clearTimeout(countClearAnim);\r\n        countClearAnim = setTimeout(() => {\r\n            clearTagStyle([back_mountain, front_mountain, back_trees, front_trees, cloud]);\r\n        }, 2000)\r\n    }\r\n\r\n    function clearTagStyle(el) {\r\n        el.forEach(item => item.removeAttribute('style'));\r\n    }\r\n\r\n    /* Портал в конце пути, персоны */\r\n    /*let person1 = document.querySelector('.person1');\r\n    let portal = document.querySelector('.portal');\r\n    let portal_right = document.querySelector('.portal_right');\r\n    let wrap_portal = document.querySelector('.wrap_portal');\r\n\r\n    // Двигаем портал на уровень персоны\r\n    let xxx = person1.getBoundingClientRect()\r\n    wrap_portal.style.top = Math.floor(xxx.top) + 'px';\r\n\r\n    locatePerson();\r\n\r\n    function locatePerson() {\r\n        requestAnimationFrame(locatePerson);\r\n        let a = person1.getBoundingClientRect()\r\n        let b = wrap_portal.getBoundingClientRect()\r\n        // Hidden portal & person1\r\n        if (a.left >= b.left) {\r\n            person1.style.left = '';\r\n            person1.style.animation = 'none';\r\n            portal_right.classList.remove('opacity07');\r\n            portal.classList.remove('opacity03');\r\n        }\r\n        // Show portal\r\n        if (a.left >= (b.left - 300) && a.left < b.left) {\r\n            portal_right.classList.add('opacity07');\r\n            portal.classList.add('opacity03');\r\n            setTimeout(() => {\r\n                person1.style.left = '';\r\n                person1.style.animation = '';\r\n            }, 2000)\r\n        }\r\n    }*/\r\n\r\n\r\n    /** 3D Object **/\r\n    let scene = new THREE.Scene();\r\n    let camera = new THREE.PerspectiveCamera(45, 600 / 600, 0.1, 5000)\r\n    camera.position.z = 10; // отдалим камеру по оси Z\r\n\r\n    let renderer = new THREE.WebGLRenderer({alpha: true, antialias: true});\r\n    renderer.setClearColor(0x000000, 0); // Прозрачность фона\r\n    renderer.setSize(200, 200); // Размер канваса\r\n\r\n    renderer.domElement.setAttribute('id', 'webgl3D'); // Добавляем на страницу\r\n    let webgl = document.getElementById('webgl');\r\n    webgl.appendChild(renderer.domElement);\r\n\r\n    const aLight = new THREE.AmbientLight(0xb16d08, 2); // Добавляем свет в сцену\r\n    scene.add(aLight);\r\n\r\n    const pLight = new THREE.PointLight(0xffffff, 1.3);  // Позиция света\r\n    pLight.position.set(1, 1, 1);\r\n    scene.add(pLight);\r\n\r\n    /*const helper = new THREE.PointLightHelper(pLight);\r\n    scene.add(helper);*/\r\n\r\n    let loader = new THREE.GLTFLoader();\r\n    let obj = null;\r\n\r\n    loader.load('../webgl/halloween_pumpkin/scene.gltf', function (gltf) {\r\n        //    loader.load('https://googleman.ru/hw/webgl/halloween_pumpkin/scene.gltf', function (gltf) {\r\n        //loader.load('../webgl/stilized_building/scene.gltf', function (gltf) {\r\n        obj = gltf;\r\n        obj.scene.scale.set(0.03, 0.03, 0.03);\r\n\r\n        scene.add(obj.scene)\r\n    });\r\n    animateRight();\r\n\r\n    function animateRight() {\r\n        //requestAnimationFrame(animateRight);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y += 0.012; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n    function animateLeft() {\r\n        //requestAnimationFrame(animateLeft);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y -= 0.009; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n    animate();\r\n\r\n    function animate() {\r\n        requestAnimationFrame(animate);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y -= 0.001; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n});\r\n\r\n"]}