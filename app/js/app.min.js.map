{"version":3,"sources":["app.js"],"names":["window","addEventListener","bound","document","querySelector","countClearAnim","container","back_mountain","front_mountain","back_trees","e","clearTimeout","xNew","screenX","xOld","style","left","front_trees","animateRight","obj","scene","rotation","y","renderer","camera","screenY","yOld","bottom","setTimeout","removeAttribute","person1","portal","portal_right","clearTagStyle","setInterval","Math","floor","getComputedStyle","replace","screen","width","debounce","add","left_person","switchI","idInterval","open_portal","classList","r","right","showPortal","close_portal","clearInterval","remove","animation","THREE","PerspectiveCamera","alpha","antialias","domElement","setAttribute","getElementById","appendChild","aLight","AmbientLight","position","PointLight","pLight","set","loader","GLTFLoader","setSize","render","gltf","scale","animate","requestAnimationFrame"],"mappings":"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","file":"app.min.js","sourcesContent":["window.addEventListener('load', () => {\r\n    let bound = 0;\r\n    let countClearAnim = 0;\r\n    const container = document.querySelector('.container');\r\n    const back_mountain = document.querySelector('.back_mountain');\r\n    const front_mountain = document.querySelector('.front_mountain');\r\n    const back_trees = document.querySelector('.back_trees');\r\n    const front_trees = document.querySelector('.front_trees');\r\n    const cloud = document.querySelector('.cloud');\r\n\r\n    container.addEventListener('mousemove', moveBackground);\r\n    let xOld = 0;\r\n    let yOld = 0;\r\n\r\n    function moveBackground(e) {\r\n        clearTimeout(bound);\r\n        let xNew = e.screenX;\r\n        setTimeout(() => {\r\n            if (xNew > xOld) { // вправо\r\n                back_mountain.style.left = `-110px`;\r\n                front_mountain.style.left = `-95px`;\r\n                back_trees.style.left = `-70px`;\r\n                front_trees.style.left = `-60px`;\r\n                cloud.style.left = `-100px`;\r\n                animateRight();\r\n            } else { // влево\r\n                back_mountain.style.left = `-90px`;\r\n                front_mountain.style.left = `-60px`;\r\n                back_trees.style.left = `-25px`;\r\n                front_trees.style.left = `0`;\r\n                cloud.style.left = `0`;\r\n                animateLeft();\r\n            }\r\n\r\n            let yNew = e.screenY;\r\n            if (yNew > yOld) { // вниз\r\n                back_mountain.style.bottom = `-145px`;\r\n                front_mountain.style.bottom = `-155px`;\r\n                back_trees.style.bottom = `-5px`;\r\n                front_trees.style.bottom = `60px`;\r\n            } else { // вверх\r\n                back_mountain.style.bottom = `-165px`;\r\n                front_mountain.style.bottom = `-180px`;\r\n                back_trees.style.bottom = `-70px`;\r\n                front_trees.style.bottom = `0`;\r\n            }\r\n            xOld = e.screenX;\r\n            yOld = e.screenY;\r\n        }, 10)\r\n        clearTimeout(countClearAnim);\r\n        countClearAnim = setTimeout(() => {\r\n            clearTagStyle([back_mountain, front_mountain, back_trees, front_trees]);\r\n        }, 2000)\r\n    }\r\n\r\n    function clearTagStyle(el) {\r\n        el.forEach(item => item.removeAttribute('style'));\r\n    }\r\n\r\n    /* Портал в конце пути, персоны */\r\n    let person1 = document.querySelector('.person1');\r\n    let portal = document.querySelector('.portal');\r\n    let portal_right = document.querySelector('.portal_right');\r\n    let debounce = 0;\r\n\r\n    setInterval(() => {\r\n        clearTimeout(debounce);\r\n        let left_person = Math.floor(window.getComputedStyle(person1).left.replace('px', ''));\r\n        if (left_person >= window.screen.width / 2 - 250) {\r\n            open_portal();\r\n        }\r\n    }, 25);\r\n\r\n    let switchI = true;\r\n    function open_portal() {\r\n        portal_right.classList.add('opacity1');\r\n        portal.classList.add('opacity055');\r\n        switchI ? showPortal() : '';\r\n    }\r\n\r\n    function showPortal() {\r\n        switchI = false;\r\n        let r = 200;\r\n        let idInterval = setInterval(() => {\r\n            r -= 4;\r\n            portal.style.right = `-${r}px`;\r\n            portal_right.style.right = `-${r}px`;\r\n            if (r <= 5) {\r\n                close_portal();\r\n                clearInterval(idInterval);\r\n            }\r\n        }, 19);\r\n    }\r\n\r\n    function close_portal() {\r\n        person1.style.left = '-300px';\r\n        person1.style.animation = 'none';\r\n        switchI = true;\r\n        portal.style.right = ``;\r\n        portal_right.style.right = ``;\r\n        portal_right.classList.remove('opacity1');\r\n        portal.classList.remove('opacity055');\r\n\r\n        setTimeout(() => person1.style.animation = '', 1000);\r\n    }\r\n\r\n    /** 3D Object **/\r\n    let scene = new THREE.Scene();\r\n    let camera = new THREE.PerspectiveCamera(45, 600 / 600, 0.1, 5000)\r\n    camera.position.z = 10; // отдалим камеру по оси Z\r\n\r\n    let renderer = new THREE.WebGLRenderer({alpha: true, antialias: true});\r\n    renderer.setClearColor(0x000000, 0); // Прозрачность фона\r\n    renderer.setSize(200, 200); // Размер канваса\r\n\r\n    renderer.domElement.setAttribute('id', 'webgl3D'); // Добавляем на страницу\r\n    let webgl = document.getElementById('webgl');\r\n    webgl.appendChild(renderer.domElement);\r\n\r\n    const aLight = new THREE.AmbientLight(0xb16d08, 2); // Добавляем свет в сцену\r\n    scene.add(aLight);\r\n\r\n    const pLight = new THREE.PointLight(0xffffff, 1.3);  // Позиция света\r\n    pLight.position.set(1, 1, 1);\r\n    scene.add(pLight);\r\n\r\n    /*const helper = new THREE.PointLightHelper(pLight);\r\n    scene.add(helper);*/\r\n\r\n    let loader = new THREE.GLTFLoader();\r\n    let obj = null;\r\n\r\n    loader.load('../webgl/halloween_pumpkin/scene.gltf', function (gltf) {\r\n        //loader.load('https://googleman.ru/hw/webgl/halloween_pumpkin/scene.gltf', function (gltf) {\r\n        //loader.load('../webgl/stilized_building/scene.gltf', function (gltf) {\r\n        obj = gltf;\r\n        obj.scene.scale.set(0.03, 0.03, 0.03);\r\n\r\n        scene.add(obj.scene)\r\n    });\r\n    animateRight();\r\n\r\n    function animateRight() {\r\n        //requestAnimationFrame(animateRight);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y += 0.012; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n    function animateLeft() {\r\n        //requestAnimationFrame(animateLeft);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y -= 0.009; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n    animate();\r\n\r\n    function animate() {\r\n        requestAnimationFrame(animate);\r\n\r\n        if (obj)\r\n            obj.scene.rotation.y -= 0.001; // Скорость движения\r\n\r\n        renderer.render(scene, camera);\r\n    }\r\n});"]}